# üé£ Git Hooks - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## ü§î –ß—Ç–æ —Ç–∞–∫–æ–µ Git Hooks?

**Git Hooks** - —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–∫—Ä–∏–ø—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç—ã —Å Git.

### –ó–∞—á–µ–º –æ–Ω–∏ –Ω—É–∂–Ω—ã?

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø—Ä–æ–≤–µ—Ä—è—é—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞
‚úÖ **–õ–æ–≤—è—Ç –æ—à–∏–±–∫–∏** –¥–æ –∫–æ–º–º–∏—Ç–∞
‚úÖ **–§–æ—Ä–º–∞—Ç–∏—Ä—É—é—Ç** –∫–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
‚úÖ **–û–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç** –µ–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å –≤ –ø—Ä–æ–µ–∫—Ç–µ

### –ö–æ–≥–¥–∞ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç?

- **pre-commit** - –ü–ï–†–ï–î –∫–∞–∂–¥—ã–º –∫–æ–º–º–∏—Ç–æ–º
- **pre-push** - –ü–ï–†–ï–î –æ—Ç–ø—Ä–∞–≤–∫–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- **commit-msg** - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞

---

## üìã –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤ –Ω–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ?

–ü—Ä–∏ –∫–∞–∂–¥–æ–º –∫–æ–º–º–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è:

### 1. ‚ú® –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (Auto-fix)
```
‚úì Black - —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç Python –∫–æ–¥
‚úì isort - —Å–æ—Ä—Ç–∏—Ä—É–µ—Ç –∏–º–ø–æ—Ä—Ç—ã
‚úì Trim trailing whitespace - —É–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–±–µ–ª—ã
‚úì Fix end of files - –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ü—ã —Ñ–∞–π–ª–æ–≤
```
**–≠—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è—é—Ç —Ñ–∞–π–ª—ã!**

### 2. üîç –õ–∏–Ω—Ç–∏–Ω–≥ (–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞)
```
‚úó flake8 - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∏–ª—å –∫–æ–¥–∞ (PEP 8)
‚úó mypy - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–∏–ø—ã
‚úó pylint - –≥–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞
```
**–≠—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ù–ï –∏—Å–ø—Ä–∞–≤–ª—è—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ - –Ω—É–∂–Ω–æ –ø—Ä–∞–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é**

### 3. üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
```
‚úó bandit - –∏—â–µ—Ç —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –≤ –∫–æ–¥–µ
‚úó Check for secrets - –∏—â–µ—Ç –ø–∞—Ä–æ–ª–∏/—Ç–æ–∫–µ–Ω—ã
```

### 4. üìù –§–∞–π–ª—ã
```
‚úì Check YAML/JSON/TOML syntax
‚úì Check for large files
‚úì Check for merge conflicts
```

---

## üö´ –ü–æ—á–µ–º—É –∫–æ–º–º–∏—Ç –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç?

–í–∞—à –∫–æ–º–º–∏—Ç **–ù–ï –ü–†–û–®–ï–õ** –∏–∑-–∑–∞ –æ—à–∏–±–æ–∫ –≤ –∫–æ–¥–µ. –õ–æ–≥ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:

###  –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **Flake8 (—Å—Ç–∏–ª—å –∫–æ–¥–∞)**
   - –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã (`F401`)
   - –°–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ (`E501` - –±–æ–ª—å—à–µ 88 —Å–∏–º–≤–æ–ª–æ–≤)
   - –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ docstrings (`D104`, `D400`)
   - –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (`F841`)

2. **Mypy (–ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤)**
   - –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
   - –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –∞—Ç—Ä–∏–±—É—Ç—ã (`CreateCommand`, `LoadCommand`, `ExportCommand` - –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã)
   - –ü—Ä–æ–±–ª–µ–º—ã —Å `Any` —Ç–∏–ø–æ–º

3. **Bandit (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `subprocess` (–Ω–∏–∑–∫–∏–π —Ä–∏—Å–∫)
   - `try-except-continue` –±–µ–∑ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ 1: –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ (–ë—ã—Å—Ç—Ä–æ)

### –î–ª—è —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–º–º–∏—Ç–∞:
```bash
# –û–±–æ–π—Ç–∏ –í–°–ï –ø—Ä–æ–≤–µ—Ä–∫–∏
git commit -m "Phase 2 complete: infrastructure ready" --no-verify

# –ò–ª–∏ –∫–æ—Ä–æ—á–µ
git commit -m "your message" -n
```

‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ**: –≠—Ç–æ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –í–°–ï –ø—Ä–æ–≤–µ—Ä–∫–∏!

---

## üîß –†–µ—à–µ–Ω–∏–µ 2: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã (–ü—Ä–∞–≤–∏–ª—å–Ω–æ)

### –ê–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

```bash
# 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
poetry run black src/ tests/
poetry run isort src/ tests/

# 2. –£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã –≤—Ä—É—á–Ω—É—é
# –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª—ã –∏ —É–¥–∞–ª–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏ —Å F401

# 3. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∫–æ–º–º–∏—Ç —Å–Ω–æ–≤–∞
git add .
git commit -m "your message"
```

### –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫

–í —Ñ–∞–π–ª–∞—Ö –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:

```python
# –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å flake8
import something  # noqa: F401

# –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å mypy
x: Any = some_func()  # type: ignore

# –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å bandit
subprocess.run(...)  # nosec B603
```

---

## üõ†Ô∏è –†–µ—à–µ–Ω–∏–µ 3: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏

### –û—Ç–∫–ª—é—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.pre-commit-config.yaml`:

```yaml
# –ü—Ä–∏–º–µ—Ä: –æ—Ç–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –¥–ª–∏–Ω—ã —Å—Ç—Ä–æ–∫
- id: flake8
  args: ['--extend-ignore=E501']
```

–ò–ª–∏ –≤ `pyproject.toml`:

```toml
[tool.flake8]
extend-ignore = E501  # –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–ª–∏–Ω—É —Å—Ç—Ä–æ–∫
```

---

## üóëÔ∏è –†–µ—à–µ–Ω–∏–µ 4: –û—Ç–∫–ª—é—á–∏—Ç—å hooks –ø–æ–ª–Ω–æ—Å—Ç—å—é (–ù–ï —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –£–¥–∞–ª–∏—Ç—å pre-commit hook
rm .git/hooks/pre-commit

# –ò–ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç—å pre-commit framework
pre-commit uninstall
```

‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ**: –≠—Ç–æ –æ—Ç–∫–ª—é—á–∏—Ç –í–°–ï –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–≤—Å–µ–≥–¥–∞!

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã:

1. **–ü–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º** –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –∞–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
   ```bash
   poetry run black src/ tests/
   poetry run isort src/ tests/
   ```

2. **–ò–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ –Ω–µ—Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ**:
   - –î–ª–∏–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –≤ scripts/ –º–æ–∂–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å
   - Docstrings –≤ `__init__.py` –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã
   - –ù–µ–∫–æ—Ç–æ—Ä—ã–µ security warnings (Low severity) –º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å

3. **–ò—Å–ø—Ä–∞–≤–ª—è–π—Ç–µ –≤–∞–∂–Ω–æ–µ**:
   - –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã (—É–¥–∞–ª–∏—Ç—å)
   - –ü—Ä–æ–±–ª–µ–º—ã —Å —Ç–∏–ø–∞–º–∏ (–∏—Å–ø—Ä–∞–≤–∏—Ç—å –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å `# type: ignore`)
   - –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –∫–ª–∞—Å—Å—ã (—Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–ª–∏ —É–±—Ä–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)

### –î–ª—è —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–º–º–∏—Ç–∞:

```bash
# –°–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–± - –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏
git commit -m "Phase 2 infrastructure + tests fixed" --no-verify

# –ò–ª–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∞–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª—è–µ–º–æ–µ
poetry run black src/ tests/
poetry run isort src/ tests/
git add .
git commit -m "Phase 2 infrastructure + tests fixed"
```

---

## üìä –°—Ç–∞—Ç—É—Å –ø—Ä–æ–≤–µ—Ä–æ–∫ –≤ –Ω–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ

### ‚úÖ –ü—Ä–æ—Ö–æ–¥—è—Ç:
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (Black, isort)
- Trailing whitespace
- YAML/JSON/TOML syntax
- Docstring coverage

### ‚è≥ –ï—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã:
- Flake8 (~60 warnings)
- Mypy (24 errors)
- Bandit (4 Low severity issues)

### üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã:

1. **–í—ã—Å–æ–∫–∏–π**: Mypy errors –≤ `presentation/cli/app.py` (–æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –∫–ª–∞—Å—Å—ã)
2. **–°—Ä–µ–¥–Ω–∏–π**: F401 –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã
3. **–ù–∏–∑–∫–∏–π**: E501 –¥–ª–∏–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏, D400 docstrings
4. **–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å**: Bandit Low severity –≤ scripts/

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è –≤–∞—à–µ–≥–æ —Å–ª—É—á–∞—è

**–°–µ–π—á–∞—Å –ø—Ä–æ—Å—Ç–æ –∑–∞–∫–æ–º–º–∏—Ç—å—Ç–µ —Å --no-verify:**

```bash
git add .
git commit -m "Phase 2 complete: infrastructure + fixed tests + updated docs" --no-verify
git push
```

**–ü–æ—Ç–æ–º, –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –≤—Ä–µ–º—è, –∏—Å–ø—Ä–∞–≤—å—Ç–µ:**
- –£–¥–∞–ª–∏—Ç–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã
- –†–µ–∞–ª–∏–∑—É–π—Ç–µ CreateCommand, LoadCommand, ExportCommand
- –ò—Å–ø—Ä–∞–≤—å—Ç–µ mypy errors

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Pre-commit documentation](https://pre-commit.com/)
- [Flake8 rules](https://www.flake8rules.com/)
- [Mypy documentation](https://mypy.readthedocs.io/)
- [Black code style](https://black.readthedocs.io/)

---

**–í—ã–≤–æ–¥:** Hooks –ø–æ–ª–µ–∑–Ω—ã –¥–ª—è quality control, –Ω–æ –∏–Ω–æ–≥–¥–∞ –∏—Ö –Ω—É–∂–Ω–æ –æ–±–æ–π—Ç–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞! üéØ
